<html><head>

<script type="text/javascript" src="/js/swfobject.js"></script>
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/jsSO.js"></script>

<script type="text/javascript">

$(':button.sync').live('click', function(){
	var rand = Math.random();
	$('pre').append('sync: '+rand+'\n');
	jsSO.set('someVar', rand);
});

$(':button.send').live('click', function(){
	var rand = Math.random();
	$('pre').append('send: '+{a :rand}+'\n');
	jsSO.send({a:rand});
});

jsSO.onConnect(function(event) {
	$('pre').append('connect\n');
});

jsSO.onSync(function(event, updates, data) {
	if (updates.someVar) {
		$('pre').append('receive: '+data.someVar+'\n');
	}
});

jsSO.onMessage(function(event, data) {
	$('pre').append('message: '+data+'\n');
});

jsSO.connect('rtmp://localhost:1936/SOSample', 'chat');

</script>

</head>
<body>
<form>
	<input class='sync' type="button" value="sync" />
	<input class='send' type="button" value="send" />
	<pre></pre>
</form>
</body>
</html>
