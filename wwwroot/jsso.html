<html><head>

<script type="text/javascript" src="/js/swfobject.js"></script>
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/jsSO.js"></script>


</head>
<body>
<form>
	<input class='sync' type="button" value="sync" />
	<input class='send' type="button" value="send" />
	<pre></pre>
</form>

<script type="text/javascript">

$('.sync').click(function(){
	var rand = Math.random();
	$('pre').append('sync: '+rand+'\n');
	jsSO.set('someVar', rand);
});

$('.send').click(function(){
	var rand = Math.random();
	$('pre').append('send: '+rand+'\n');
	jsSO.send("onMessage", {a:rand});
});

jsSO.onConnect(function(event) {
	$('pre').append('connect\n');
});

jsSO.onSync(function(event, updates, data) {
	if (updates.someVar) {
		$('pre').append('receive: '+data.someVar+'\n');
	}
});

jsSO.onMessage(function(event, data) {
	$('pre').append('message: '+data.a+'\n');
});

jsSO.connect('rtmp://localhost:1936/SOSample', 'chat', {debug : true});

</script>

</body>
</html>
